<link rel="stylesheet" href="/styles/regStyle.css">

<div id="particles-js" class="snow"></div>

<main>
    <div class="left-side"></div>

    <div class="right-side">
        <form method="post" action="/user/register" onsubmit="return validateForm(event)">
            <input type="text" id="message" value="{{{message}}}" hidden name="message" aria-valuemax="">
            <div class="btn-group">
                <button type="button" class="btn">
                    <img class="logo"
                        src="https://github.com/ecemgo/mini-samples-great-tricks/assets/13468728/d1c98974-c62d-4071-8bd2-ab859fc5f4e9"
                        alt="" />
                    <span>Sign in with Google</span>
                </button>
                <button type="button" class="btn">
                    <img class="logo"
                        src="https://github.com/ecemgo/mini-samples-great-tricks/assets/13468728/59c1561b-8152-4d05-b617-0680a7629a0e"
                        alt="" />
                    <span>Sign in with Apple</span>
                </button>
            </div>

            <div class="or">OR</div>

            <label for="email">Email</label>
            <input id="email" type="text" placeholder="Enter Email" name="email" required />
            
            <label for="password">Password</label>
            <input id="password" type="password" placeholder="Enter Password" name="password" required />

            <label for="confirmPassword">Confirm Password</label>
            <input id="confirmPassword" type="password" placeholder="Enter Password" name="confirmPassword" required />

            <button type="submit" class="login-btn">Sign in</button>
            <div class="links">
                <a href="#">Forgot password?</a>
                <a href="#">Do not have an account?</a>
            </div>
        </form>
    </div>
</main>

<script>

    const message = document.getElementById('message').value;
    if(message){

        console.log(message);
        Swal.fire(message);
        
        }

    function validateForm(event) {
        // Prevent default form submission

        // Get form values
        var email = document.getElementById("email").value;
        var password = document.getElementById("password").value;
        var confirmPassword = document.getElementById("confirmPassword").value;

        // Email validation regex
        var emailPattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;

        // Email validation
        if (!emailPattern.test(email)) {
            Swal.fire("Please enter a valid email address.");
            return false;
        }

        // Password length validation
        if (password.length < 6) {
            Swal.fire("Password must be at least 6 characters long.");
            return false;
        }

        // Password match validation
        if (password !== confirmPassword) {
            Swal.fire({
                icon: "error",
                title: "Oops...",
                text: "Passwords do not match!!",
                footer: '<a href="#">Why do I have this issue?</a>'
                });

             event.preventDefault();
            return false;
        }

        // If all validations pass
        //alert("Form submitted successfully!");
        //return true;
    }
</script>
